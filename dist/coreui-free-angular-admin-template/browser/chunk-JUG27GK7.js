import{a as z}from"./chunk-KEQMXZG3.js";import{a as L}from"./chunk-ZP7S6SWW.js";import{b as G,c as W,d as U,g as H,j as P,k as V,t as j,v as q}from"./chunk-EAGDHIOY.js";import{$a as O,H as x,Qa as D,Sa as B,Ya as k,_a as F,aa as M,bb as N,cb as A,o as v,ra as E,sa as T,ua as R,w as b,x as _}from"./chunk-ZE63MCPL.js";import{Kb as t,Lb as o,Mb as g,Vb as I,db as u,eb as d,hc as m,ia as h,mc as S,nc as f,oc as C,qc as y,va as c,wa as p}from"./chunk-DRLFSV2D.js";import{f as K}from"./chunk-TMEVGU2Q.js";var l=K(z());var J="/dashboard",Q="/pages/password-reset",X="/school",Y="SuperAdmin",se=(()=>{let i=class i{constructor(e,a){this.router=e,this.apiService=a,this.newItem={email:"",password:""}}onSubmit(){localStorage.removeItem("token"),this.apiService.post("Login/SignIn",this.newItem).subscribe({next:e=>{console.log("Login response:",e),this.newItem={email:"",password:""},e.status==="success"?l.default.fire({title:"Success!",text:`${e.message}`,icon:"success",confirmButtonText:"OK"}).then(()=>{localStorage.setItem("token",`Bearer ${e.data.token}`),localStorage.setItem("role",e.data.role),localStorage.setItem("userId",e.data.userId),e.data.firstLogin==!0?this.router.navigate([Q]):e.data.role===Y?this.router.navigate([X]):this.router.navigate([J])}):l.default.fire({title:"Error",text:`${e.message}`,icon:"error",confirmButtonText:"Retry"})},error:e=>{l.default.fire({title:"Error",text:`${e.error.message}`,icon:"error",confirmButtonText:"Retry"})}})}};i.\u0275fac=function(a){return new(a||i)(d(b),d(L))},i.\u0275cmp=h({type:i,selectors:[["app-login"]],standalone:!0,features:[y],decls:27,vars:2,consts:[[1,"bg-light","dark:bg-transparent","min-vh-100","d-flex","flex-row","align-items-center"],["breakpoint","md"],[1,"justify-content-center"],["lg","10","xl","8"],[1,"p-4"],["cForm","",3,"ngSubmit"],[1,"text-body-secondary"],[1,"mb-3"],["cInputGroupText",""],["cIcon","","name","cilUser"],["autoComplete","username","cFormControl","","placeholder","Username","name","username","required","",3,"ngModelChange","ngModel"],[1,"mb-4"],["cIcon","","name","cilLockLocked"],["autoComplete","current-password","cFormControl","","placeholder","Password","type","password","name","password","required","",3,"ngModelChange","ngModel"],["xs","6"],["cButton","","color","primary","type","submit",1,"px-4"],["xs","6",1,"text-right"],["cButton","","color","link","type","button","routerLink","/register",1,"px-0"]],template:function(a,n){a&1&&(t(0,"div",0)(1,"c-container",1)(2,"c-row",2)(3,"c-col",3)(4,"c-card-group")(5,"c-card",4)(6,"c-card-body")(7,"form",5),I("ngSubmit",function(){return n.onSubmit()}),t(8,"h1"),m(9,"Login"),o(),t(10,"p",6),m(11,"Sign In to your account"),o(),t(12,"c-input-group",7)(13,"span",8),c(),g(14,"svg",9),o(),p(),t(15,"input",10),C("ngModelChange",function(r){return f(n.newItem.email,r)||(n.newItem.email=r),r}),o()(),t(16,"c-input-group",11)(17,"span",8),c(),g(18,"svg",12),o(),p(),t(19,"input",13),C("ngModelChange",function(r){return f(n.newItem.password,r)||(n.newItem.password=r),r}),o()(),t(20,"c-row")(21,"c-col",14)(22,"button",15),m(23," Login "),o()(),t(24,"c-col",16)(25,"button",17),m(26," Forgot password? "),o()()()()()()()()()()()),a&2&&(u(15),S("ngModel",n.newItem.email),u(4),S("ngModel",n.newItem.password))},dependencies:[v,O,A,N,R,E,T,D,B,F,x,k,M,q,V,G,W,U,j,P,H,_]});let s=i;return s})();export{se as LoginComponent};
