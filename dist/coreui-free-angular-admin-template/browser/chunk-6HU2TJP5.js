import{c as k}from"./chunk-5GULS5GK.js";import{a as K}from"./chunk-KEQMXZG3.js";import"./chunk-GOXB5OSV.js";import"./chunk-4BHWRWDA.js";import{a as _}from"./chunk-ZP7S6SWW.js";import{c as L,d as N,g as R,j as O,k as A,q as W,r as G,s as P,t as $,v as q,w as V}from"./chunk-EAGDHIOY.js";import{Qa as F,aa as x,bb as I,cb as B,d as M,ra as w,sa as E,va as D,w as j}from"./chunk-ZE63MCPL.js";import{Kb as o,Lb as a,Vb as y,db as s,eb as v,hc as c,ia as S,ic as h,mc as f,nc as C,oc as b,qc as T,xb as g,zb as m}from"./chunk-DRLFSV2D.js";import{f as H}from"./chunk-TMEVGU2Q.js";var p=H(K());function z(i,n){if(i&1&&(o(0,"option",12),c(1),a()),i&2){let l=n.$implicit;m("value",l.id),s(),h(l.name)}}function J(i,n){if(i&1&&(o(0,"option",12),c(1),a()),i&2){let l=n.$implicit;m("value",l.id),s(),h(l.name)}}function Q(i,n){if(i&1&&(o(0,"option",12),c(1),a()),i&2){let l=n.$implicit;m("value",l.id),s(),h(l.name)}}var Te=(()=>{let n=class n{constructor(e,u){this.router=e,this.apiService=u,this.newItem={email:"",password:"",role:""},this.newItemII={repeatPassword:""},this.classLevels=[],this.classTeachers=[],this.classSubject=[],this.conList=[],this.currentCountry={name:"",class:"",classTeacher:"",classAssistTeacher:"",subject:""}}ngOnInit(){this.refreshData(),this.getClass(),this.getClassTeachers(),this.getSubjects()}refreshData(){this.apiService.get("Classes/GetAll").subscribe({next:e=>{e.status==="success"?this.conList=e.data:p.default.fire({title:"Error",text:`${e.message}`,icon:"error",confirmButtonText:"Retry"})},error:e=>{p.default.fire({title:"Error",text:`${e.error.message}`,icon:"error",confirmButtonText:"Retry"})}})}getClass(){this.apiService.get("Classes/GetAll").subscribe({next:e=>{console.log(e.data),this.classLevels=e.data},error:e=>{console.error("Error fetching class levels",e)}})}getClassTeachers(){this.apiService.get("Staff/GetAllTeacherAndAssist").subscribe({next:e=>{this.classTeachers=e.data},error:e=>{console.error("Error fetching class levels",e)}})}getSubjects(){this.apiService.get("Subject/GetAll").subscribe({next:e=>{console.log(e.data),this.classSubject=e.data},error:e=>{console.error("Error fetching class levels",e)}})}onSubmit(){let e=`${this.currentCountry.class}`,u=`${this.currentCountry.classTeacher}`,r=`${this.currentCountry.subject}`,d={classId:e,teacherId:u,subjectId:r};console.log(d),this.apiService.post("Subject/MapToSubject",d).subscribe({next:t=>{console.log("Register successful",t),t.status==="success"?p.default.fire({title:"Success!",text:`${t.message}`,icon:"success",confirmButtonText:"OK"}).then(()=>{localStorage.setItem("token",t.data.token),this.router.navigate(["/dashboard"])}):p.default.fire({title:"Error",text:`${t.message}`,icon:"error",confirmButtonText:"Retry"})},error:t=>{p.default.fire({title:"Error",text:`${t.error.message}`,icon:"error",confirmButtonText:"Retry"})}})}};n.\u0275fac=function(u){return new(u||n)(v(j),v(_))},n.\u0275cmp=S({type:n,selectors:[["app-mapsubjecttoteacher"]],standalone:!0,features:[T],decls:28,vars:6,consts:[["xs","12"],[1,"mb-4"],[1,"d-flex","justify-content-between","align-items-center"],["cForm","",3,"ngSubmit"],[1,"form-group"],["for","classLevel"],["id","classLevel","name","classLevel","required","",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["id","classTeacher","name","classTeacher","required","",1,"form-control",3,"ngModelChange","ngModel"],["id","classsubject","name","classsubject","required","",1,"form-control",3,"ngModelChange","ngModel"],["xs","6"],["cButton","","color","success","type","submit",1,"px-4"],[3,"value"]],template:function(u,r){u&1&&(o(0,"c-row")(1,"c-col",0)(2,"c-card",1)(3,"c-card-header",2)(4,"strong"),c(5,"Map Subject To Teachers"),a()(),o(6,"c-card-body")(7,"form",3),y("ngSubmit",function(){return r.onSubmit()}),o(8,"c-row")(9,"div",4)(10,"label",5),c(11,"Class"),a(),o(12,"select",6),b("ngModelChange",function(t){return C(r.currentCountry.class,t)||(r.currentCountry.class=t),t}),g(13,z,2,2,"option",7),a()(),o(14,"div",4)(15,"label",5),c(16,"Class Head Teacher"),a(),o(17,"select",8),b("ngModelChange",function(t){return C(r.currentCountry.classTeacher,t)||(r.currentCountry.classTeacher=t),t}),g(18,J,2,2,"option",7),a()(),o(19,"div",4)(20,"label",5),c(21,"Class Subjects"),a(),o(22,"select",9),b("ngModelChange",function(t){return C(r.currentCountry.subject,t)||(r.currentCountry.subject=t),t}),g(23,Q,2,2,"option",7),a()()(),o(24,"c-row")(25,"c-col",10)(26,"button",11),c(27," Map Subject To Teacher "),a()()()()()()()()),u&2&&(s(12),f("ngModel",r.currentCountry.class),s(),m("ngForOf",r.classLevels),s(4),f("ngModel",r.currentCountry.classTeacher),s(),m("ngForOf",r.classTeachers),s(4),f("ngModel",r.currentCountry.subject),s(),m("ngForOf",r.classSubject))},dependencies:[B,I,w,D,E,V,A,G,P,W,L,N,$,q,O,R,F,x,M,k]});let i=n;return i})();export{Te as MapsubjecttoteacherComponent};
