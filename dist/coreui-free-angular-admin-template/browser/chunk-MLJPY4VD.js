import{a as te,b as ne,c as ie}from"./chunk-5GULS5GK.js";import{a as re}from"./chunk-KEQMXZG3.js";import"./chunk-GOXB5OSV.js";import{a as $}from"./chunk-4BHWRWDA.js";import{a as k}from"./chunk-ZP7S6SWW.js";import{b as H,c as K,d as U,g as Y,j as J,k as Q,t as X,v as Z,w as ee}from"./chunk-EAGDHIOY.js";import{aa as N,ba as V,bb as I,cb as R,d as B,qb as W,ra as F,sa as L,sb as z,tb as j,ub as q,va as A,vb as G}from"./chunk-ZE63MCPL.js";import{Kb as n,Lb as o,Qb as O,Vb as s,Xb as _,db as d,eb as E,hc as r,ia as T,ic as C,mc as b,nc as M,oc as x,qc as P,sc as D,ta as g,tc as S,ua as f,vc as v,xb as w,zb as h}from"./chunk-DRLFSV2D.js";import{a as y,f as oe}from"./chunk-TMEVGU2Q.js";var a=oe(re());var ae=u=>({itemsPerPage:4,currentPage:u});function le(u,m){if(u&1){let p=O();n(0,"tr")(1,"th",18),r(2),o(),n(3,"td"),r(4),o(),n(5,"td")(6,"button",19),s("click",function(){let i=g(p).$implicit,e=_();return f(e.viewCountry(i))}),n(7,"i",20),r(8,"view"),o()(),n(9,"button",21),s("click",function(){let i=g(p).$implicit,e=_();return f(e.editCountry(i))}),n(10,"i",22),r(11,"edit"),o()(),n(12,"button",23),s("click",function(){let i=g(p).$implicit,e=_();return f(e.deleteCountry(i))}),n(13,"i",24),r(14,"delete"),o()()()()}if(u&2){let p=m.$implicit,t=m.index;d(2),C(t+1),d(2),C(p.name)}}var De=(()=>{let m=class m{constructor(t){this.apiService=t,this.conList=[],this.searchText="",this.p=1,this.isModalVisible=!1,this.isEditMode=!1,this.currentCountry={name:""}}refreshData(){this.apiService.get("Countrys").subscribe({next:t=>{t.status==="success"?this.conList=t.data:a.default.fire({title:"Error",text:`${t.message}`,icon:"error",confirmButtonText:"Retry"})},error:t=>{a.default.fire({title:"Error",text:`${t.error.message}`,icon:"error",confirmButtonText:"Retry"})}})}ngOnInit(){this.refreshData()}saveCountry(){console.log("Save country:",this.currentCountry),this.isEditMode=!1,this.apiService.post("Countrys",this.currentCountry).subscribe({next:t=>{console.log("Countrys added successful",t),t.status==="success"?a.default.fire({title:"Success!",text:`${t.message}`,icon:"success",confirmButtonText:"OK"}).then(()=>{this.closeModal(),this.ngOnInit()}):a.default.fire({title:"Error",text:`${t.message}`,icon:"error",confirmButtonText:"Retry"})},error:t=>{a.default.fire({title:"Error",text:`${t.error.message}`,icon:"error",confirmButtonText:"Retry"})}})}updateCountry(){let t={name:this.currentCountry.name};this.apiService.put(`Countrys/${this.currentCountry._id}`,t).subscribe({next:i=>{if(i.status==="success"){let e=this.conList.findIndex(c=>c.id===this.currentCountry._id);e!==-1&&(this.conList[e]=y({},this.currentCountry)),a.default.fire({title:"Updated!",text:`${i.message}`,icon:"success",confirmButtonText:"OK"}).then(()=>{this.closeModal(),this.ngOnInit()})}else a.default.fire({title:"Error",text:`${i.message}`,icon:"error",confirmButtonText:"Retry"})},error:i=>{a.default.fire({title:"Error",text:`${i.error.message||"An unexpected error occurred"}`,icon:"error",confirmButtonText:"Retry"})}})}viewCountry(t){let e=new Date(t.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"});a.default.fire({title:"Country Details",html:`<strong>Country:</strong> ${t.name}
      <br/>
             <strong>CreatedAt:</strong> ${e} `,icon:"info",confirmButtonText:"Close"})}editCountry(t){console.log("Edit country:",t),this.currentCountry=y({},t),this.isEditMode=!0,this.openModal()}deleteCountry(t){a.default.fire({title:"Are you sure?",text:`Do you want to delete ${t.name}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(i=>{i.isConfirmed?this.apiService.delete(`Countrys/${t._id}`).subscribe({next:()=>{this.conList=this.conList.filter(e=>e.id!==t._id),a.default.fire("Deleted!",`${t.name} has been deleted.`,"success"),this.ngOnInit()},error:e=>{a.default.fire({title:"Error",text:`${e.error.message}`,icon:"error",confirmButtonText:"Retry"})}}):i.dismiss===a.default.DismissReason.cancel&&a.default.fire("Cancelled",`${t.name} is safe.`,"error")})}openModal(){console.log("Opening modal"),this.isModalVisible=!0}closeModal(){this.isModalVisible=!1}};m.\u0275fac=function(i){return new(i||m)(E(k))},m.\u0275cmp=T({type:m,selectors:[["app-country"]],standalone:!0,features:[P],decls:40,vars:14,consts:[["xs","12"],[1,"mb-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn","btn-primary","ml-auto",3,"click"],["type","text","placeholder","Search countries",1,"form-control","mb-3",3,"ngModelChange","ngModel"],["cTable","",1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[3,"pageChange"],["backdrop","static",3,"visibleChange","visible"],["cModalTitle",""],["cButtonClose","",3,"click"],[3,"ngSubmit"],[1,"form-group"],["for","countryName"],["type","text","id","countryName","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["cButton","","color","secondary",3,"click"],["cButton","","color","primary",3,"click"],["scope","row"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"fa","fa-eyes"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"fa","fa-pencil"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-times"]],template:function(i,e){i&1&&(n(0,"c-row")(1,"c-col",0)(2,"c-card",1)(3,"c-card-header",2)(4,"strong"),r(5,"Countries List"),o(),n(6,"button",3),s("click",function(){return e.openModal()}),r(7,"Add"),o()(),n(8,"c-card-body")(9,"input",4),x("ngModelChange",function(l){return M(e.searchText,l)||(e.searchText=l),l}),o(),n(10,"table",5)(11,"thead")(12,"tr")(13,"th",6),r(14,"SN"),o(),n(15,"th",6),r(16,"Country"),o(),n(17,"th",6),r(18,"Actions"),o()()(),n(19,"tbody"),w(20,le,15,2,"tr",7),S(21,"search"),S(22,"paginate"),o()(),n(23,"pagination-controls",8),s("pageChange",function(l){return e.p=l}),o()()()()(),n(24,"c-modal",9),s("visibleChange",function(l){return e.isModalVisible=l}),n(25,"c-modal-header")(26,"h5",10),r(27),o(),n(28,"button",11),s("click",function(){return e.closeModal()}),o()(),n(29,"c-modal-body")(30,"form",12),s("ngSubmit",function(){return e.isEditMode?e.updateCountry():e.saveCountry()}),n(31,"div",13)(32,"label",14),r(33,"Country Name"),o(),n(34,"input",15),x("ngModelChange",function(l){return M(e.currentCountry.name,l)||(e.currentCountry.name=l),l}),o()()()(),n(35,"c-modal-footer")(36,"button",16),s("click",function(){return e.closeModal()}),r(37,"Close"),o(),n(38,"button",17),s("click",function(){return e.isEditMode?e.updateCountry():e.saveCountry()}),r(39),o()()()),i&2&&(d(9),b("ngModel",e.searchText),d(11),h("ngForOf",v(22,9,v(21,6,e.conList,e.searchText),D(12,ae,e.p))),d(4),h("visible",e.isModalVisible),d(3),C(e.isEditMode?"Edit Country":"Add Country"),d(7),b("ngModel",e.currentCountry.name),d(5),C(e.isEditMode?"Update":"Save"))},dependencies:[R,I,F,A,L,ee,Q,H,K,U,X,Z,J,Y,N,B,ie,ne,te,$,G,j,q,W,z,V],styles:[".table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}.table-striped[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#0000000d}.btn-sm[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{font-size:1.2em}.c-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.c-card-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:auto}.icon-large[_ngcontent-%COMP%]{font-size:1.5em;vertical-align:middle}.btn-sm[_ngcontent-%COMP%]{padding:.5rem;border-radius:.25rem;font-size:.8rem}.btn-sm[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.btn-sm[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{font-size:inherit}"]});let u=m;return u})();export{De as CountryComponent};
