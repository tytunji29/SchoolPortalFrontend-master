import{a as oe,b as ae,c as le}from"./chunk-5GULS5GK.js";import{a as de}from"./chunk-KEQMXZG3.js";import"./chunk-GOXB5OSV.js";import{a as P}from"./chunk-4BHWRWDA.js";import{a as L}from"./chunk-ZP7S6SWW.js";import{b as j,c as Y,d as z,g as J,j as Q,k as X,q as Z,r as ee,s as te,t as ne,v as ie,w as re}from"./chunk-EAGDHIOY.js";import{aa as k,ba as A,bb as R,cb as q,d as W,qb as K,ra as I,sa as O,sb as G,tb as H,ub as U,va as V,vb as $}from"./chunk-ZE63MCPL.js";import{Kb as n,Lb as i,Qb as B,Vb as m,Xb as b,db as l,eb as x,hc as o,ia as v,ic as C,jc as N,mc as c,nc as u,oc as p,qc as D,sc as F,ta as h,tc as E,ua as S,vc as T,xb as w,zb as M}from"./chunk-DRLFSV2D.js";import{a as _,f as se}from"./chunk-TMEVGU2Q.js";var d=se(de());var me=g=>({itemsPerPage:4,currentPage:g});function ce(g,f){if(g&1){let y=B();n(0,"tr")(1,"th",47),o(2),i(),n(3,"td"),o(4),i(),n(5,"td"),o(6),i(),n(7,"td"),o(8),i(),n(9,"td"),o(10),i(),n(11,"td")(12,"button",48),m("click",function(){let a=h(y).$implicit,e=b();return S(e.viewCountry(a))}),n(13,"i",49),o(14,"view"),i()(),n(15,"button",50),m("click",function(){let a=h(y).$implicit,e=b();return S(e.editCountry(a))}),n(16,"i",51),o(17,"edit"),i()(),n(18,"button",52),m("click",function(){let a=h(y).$implicit,e=b();return S(e.deleteCountry(a))}),n(19,"i",53),o(20,"delete"),i()()()()}if(g&2){let y=f.$implicit,t=f.index;l(2),C(t+1),l(2),C(y.name),l(2),C(y.address),l(2),C(y.email),l(2),C(y.mobileNumber)}}var Pe=(()=>{let f=class f{constructor(t){this.apiService=t,this.conList=[],this.searchText="",this.p=1,this.isModalVisible=!1,this.isEditMode=!1,this.currentCountry={name:"",address:"",displayPicture:"",dob:"",gender:"",subscriptionTypeFee:0,website:"",email:"",mobileNumber:"",tribe:"",staffType:"",religion:""},this.selectedLogoFile=null}refreshData(){this.apiService.get("Staff/GetAll").subscribe({next:t=>{t.status==="success"?this.conList=t.data:d.default.fire({title:"Error",text:`${t.message}`,icon:"error",confirmButtonText:"Retry"})},error:t=>{d.default.fire({title:"Error",text:`${t.error.message}`,icon:"error",confirmButtonText:"Retry"})}})}ngOnInit(){this.refreshData()}onSubmit(){let t=new FormData;t.append("name",this.currentCountry.name),t.append("address",this.currentCountry.address),this.selectedLogoFile&&t.append("displayPicture",this.selectedLogoFile),t.append("email",this.currentCountry.email),t.append("gender",this.currentCountry.gender),t.append("dob",this.currentCountry.dob),t.append("mobileNumber",this.currentCountry.mobileNumber),t.append("tribe",this.currentCountry.tribe),t.append("religion",this.currentCountry.religion),t.append("staffType",this.currentCountry.staffType),console.log("Form submission successful",t),this.apiService.post("Staff/Add",t).subscribe({next:a=>{console.log("Form submission successful",a),a.status==="success"?d.default.fire({title:"Success!",text:`${a.message}`,icon:"success",confirmButtonText:"OK"}).then(()=>{this.closeModal(),this.ngOnInit()}):d.default.fire({title:"Error",text:`${a.message}`,icon:"error",confirmButtonText:"Retry"})},error:a=>{d.default.fire({title:"Error",text:`${a.error.message}`,icon:"error",confirmButtonText:"Retry"})}})}saveCountry(){console.log("Save country:",this.currentCountry),this.isEditMode=!1,this.apiService.post("Staff/Add",this.currentCountry).subscribe({next:t=>{console.log("School added successful",t),t.status==="success"?d.default.fire({title:"Success!",text:`${t.message}`,icon:"success",confirmButtonText:"OK"}).then(()=>{this.closeModal(),this.ngOnInit()}):d.default.fire({title:"Error",text:`${t.message}`,icon:"error",confirmButtonText:"Retry"})},error:t=>{d.default.fire({title:"Error",text:`${t.error.message}`,icon:"error",confirmButtonText:"Retry"})}})}updateCountry(){let t=new FormData;t.append("name",this.currentCountry.name),t.append("address",this.currentCountry.address),this.selectedLogoFile&&t.append("displayPicture",this.selectedLogoFile),t.append("email",this.currentCountry.email),t.append("gender",this.currentCountry.gender),t.append("numberOfKidsInTheSchool",this.currentCountry.subscriptionTypeFee),t.append("staffType",this.currentCountry.staffType),t.append("dob",this.currentCountry.dob),t.append("mobileNumber",this.currentCountry.mobileNumber),t.append("tribe",this.currentCountry.tribe),t.append("religion",this.currentCountry.religion),console.log("Form submission successful",t),this.apiService.put(`Staff/UpdateById/${this.currentCountry.id}`,t).subscribe({next:a=>{if(a.status==="success"){let e=this.conList.findIndex(s=>s.id===this.currentCountry._id);e!==-1&&(this.conList[e]=_({},this.currentCountry)),d.default.fire({title:"Updated!",text:`${a.message}`,icon:"success",confirmButtonText:"OK"}).then(()=>{this.closeModal(),this.ngOnInit()})}else d.default.fire({title:"Error",text:`${a.message}`,icon:"error",confirmButtonText:"Retry"})},error:a=>{d.default.fire({title:"Error",text:`${a.error.message||"An unexpected error occurred"}`,icon:"error",confirmButtonText:"Retry"})}})}viewCountry(t){let e=new Date(t.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"});d.default.fire({title:"Country Details",html:`<strong>Country:</strong> ${t.name}
      <br/>
             <strong>CreatedAt:</strong> ${e} `,icon:"info",confirmButtonText:"Close"})}openModal(){console.log("Opening modal"),this.isModalVisible=!0}editCountry(t){console.log("Edit country:",t),this.currentCountry=_({},t),this.isEditMode=!0,this.openModal()}deleteCountry(t){d.default.fire({title:"Are you sure?",text:`Do you want to delete ${t.name}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(a=>{a.isConfirmed?this.apiService.delete(`Staff/DeleteById/${t.id}`).subscribe({next:()=>{this.conList=this.conList.filter(e=>e.id!==t.id),d.default.fire("Deleted!",`${t.name} has been deleted.`,"success"),this.ngOnInit()},error:e=>{d.default.fire({title:"Error",text:`${e.error.message}`,icon:"error",confirmButtonText:"Retry"})}}):a.dismiss===d.default.DismissReason.cancel&&d.default.fire("Cancelled",`${t.name} is safe.`,"error")})}onFileChange(t){this.selectedLogoFile=t.target.files[0]}closeModal(){this.isModalVisible=!1}};f.\u0275fac=function(a){return new(a||f)(x(L))},f.\u0275cmp=v({type:f,selectors:[["app-staff"]],standalone:!0,features:[D],decls:111,vars:22,consts:[["xs","12"],[1,"mb-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn","btn-primary","ml-auto",3,"click"],["type","text","placeholder","Search staff",1,"form-control","mb-3",3,"ngModelChange","ngModel"],["cTable","",1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[3,"pageChange"],["backdrop","static",3,"visibleChange","visible"],["cModalTitle",""],["cButtonClose","",3,"click"],[3,"ngSubmit"],[1,"container"],[1,"row"],[1,"form-group","col-md-6"],["for","countryName"],["type","text","id","countryName","placeholder","Staff Name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","countryAddress"],["type","text","id","countryAddress","placeholder","Staff Address","name","address","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","countryLogo"],["type","file","id","displayPicture","required","",1,"form-control",3,"change"],["for","countryEmail"],["type","text","placeholder","Staff Email","id","countryEmail","name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","countrySubscriptionType"],["id","gender","name","gender","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","Male"],["value","Female"],["for","dob"],["type","date","id","dob","name","dob","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","countryWebsite"],["type","text","placeholder","Phone Number","id","mobileNumber","name","mobileNumber","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","countryPinKey"],["id","stafftype","name","stafftype","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","Head Master"],["value","Teacher"],["value","Assistant Teacher"],["value","Libarian"],["value","Others"],["for","countryMobileNumber"],["type","text","placeholder","Tribe","id","countryTribe","name","Tribe","required","",1,"form-control",3,"ngModelChange","ngModel"],["id","religion","name","religion","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","Christainity"],["value","Islam"],["value","Traditional"],["cButton","","color","secondary",3,"click"],["cButton","","color","primary",3,"click"],["scope","row"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"fa","fa-eyes"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"fa","fa-pencil"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-times"]],template:function(a,e){a&1&&(n(0,"c-row")(1,"c-col",0)(2,"c-card",1)(3,"c-card-header",2)(4,"strong"),o(5,"List Of Staffs"),i(),n(6,"button",3),m("click",function(){return e.openModal()}),o(7," Add "),i()(),n(8,"c-card-body")(9,"input",4),p("ngModelChange",function(r){return u(e.searchText,r)||(e.searchText=r),r}),i(),n(10,"table",5)(11,"thead")(12,"tr")(13,"th",6),o(14,"SN"),i(),n(15,"th",6),o(16,"Name"),i(),n(17,"th",6),o(18,"Address"),i(),n(19,"th",6),o(20,"Email"),i(),n(21,"th",6),o(22,"Phone Number"),i(),n(23,"th",6),o(24,"Actions"),i()()(),n(25,"tbody"),w(26,ce,21,5,"tr",7),E(27,"search"),E(28,"paginate"),i()(),n(29,"pagination-controls",8),m("pageChange",function(r){return e.p=r}),i()()()()(),n(30,"c-modal",9),m("visibleChange",function(r){return e.isModalVisible=r}),n(31,"c-modal-header")(32,"h5",10),o(33),i(),n(34,"button",11),m("click",function(){return e.closeModal()}),i()(),n(35,"c-modal-body")(36,"form",12),m("ngSubmit",function(){return e.isEditMode?e.updateCountry():e.saveCountry()}),n(37,"div",13)(38,"form")(39,"div",14)(40,"div",15)(41,"label",16),o(42,"Staff Name"),i(),n(43,"input",17),p("ngModelChange",function(r){return u(e.currentCountry.name,r)||(e.currentCountry.name=r),r}),i()(),n(44,"div",15)(45,"label",18),o(46,"Staff Address"),i(),n(47,"input",19),p("ngModelChange",function(r){return u(e.currentCountry.address,r)||(e.currentCountry.address=r),r}),i()()(),n(48,"div",14)(49,"div",15)(50,"label",20),o(51,"Profile Picture"),i(),n(52,"input",21),m("change",function(r){return e.onFileChange(r)}),i()(),n(53,"div",15)(54,"label",22),o(55,"Staff Email"),i(),n(56,"input",23),p("ngModelChange",function(r){return u(e.currentCountry.email,r)||(e.currentCountry.email=r),r}),i()()(),n(57,"div",14)(58,"div",15)(59,"label",24),o(60,"Gender"),i(),n(61,"select",25),p("ngModelChange",function(r){return u(e.currentCountry.gender,r)||(e.currentCountry.gender=r),r}),n(62,"option",26),o(63,"Male"),i(),n(64,"option",27),o(65,"Female"),i()()(),n(66,"div",15)(67,"label",28),o(68,"Date of Birth"),i(),n(69,"input",29),p("ngModelChange",function(r){return u(e.currentCountry.dob,r)||(e.currentCountry.dob=r),r}),i()()(),n(70,"div",14)(71,"div",15)(72,"label",30),o(73,"Phone Number"),i(),n(74,"input",31),p("ngModelChange",function(r){return u(e.currentCountry.mobileNumber,r)||(e.currentCountry.mobileNumber=r),r}),i()(),n(75,"div",15)(76,"label",32),o(77,"StaffType"),i(),n(78,"select",33),p("ngModelChange",function(r){return u(e.currentCountry.staffType,r)||(e.currentCountry.staffType=r),r}),n(79,"option",34),o(80,"Head Master"),i(),n(81,"option",35),o(82,"Teacher"),i(),n(83,"option",36),o(84,"Assistant Teacher"),i(),n(85,"option",37),o(86,"Libarian"),i(),n(87,"option",38),o(88,"Others"),i()()()(),n(89,"div",14)(90,"div",15)(91,"label",39),o(92,"Tribe"),i(),n(93,"input",40),p("ngModelChange",function(r){return u(e.currentCountry.tribe,r)||(e.currentCountry.tribe=r),r}),i()(),n(94,"div",15)(95,"label",32),o(96,"Religion"),i(),n(97,"select",41),p("ngModelChange",function(r){return u(e.currentCountry.religion,r)||(e.currentCountry.religion=r),r}),n(98,"option",42),o(99,"Christainity"),i(),n(100,"option",43),o(101,"Islam"),i(),n(102,"option",44),o(103,"Traditional"),i(),n(104,"option",38),o(105,"Others"),i()()()()()()()(),n(106,"c-modal-footer")(107,"button",45),m("click",function(){return e.closeModal()}),o(108,"Close"),i(),n(109,"button",46),m("click",function(){return e.isEditMode?e.updateCountry():e.onSubmit()}),o(110),i()()()),a&2&&(l(9),c("ngModel",e.searchText),l(17),M("ngForOf",T(28,17,T(27,14,e.conList,e.searchText),F(20,me,e.p))),l(4),M("visible",e.isModalVisible),l(3),C(e.isEditMode?"Edit Staff":"Add Staff"),l(10),c("ngModel",e.currentCountry.name),l(4),c("ngModel",e.currentCountry.address),l(9),c("ngModel",e.currentCountry.email),l(5),c("ngModel",e.currentCountry.gender),l(8),c("ngModel",e.currentCountry.dob),l(5),c("ngModel",e.currentCountry.mobileNumber),l(4),c("ngModel",e.currentCountry.staffType),l(15),c("ngModel",e.currentCountry.tribe),l(4),c("ngModel",e.currentCountry.religion),l(13),N(" ",e.isEditMode?"Update":"Save"," "))},dependencies:[q,R,I,V,O,re,X,ee,te,j,Z,Y,z,ne,ie,Q,J,k,W,le,ae,oe,P,$,H,U,K,G,A]});let g=f;return g})();export{Pe as StaffComponent};
