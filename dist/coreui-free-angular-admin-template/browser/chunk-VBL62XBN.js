import{a as oe,b as le,c as ae}from"./chunk-5GULS5GK.js";import{a as se}from"./chunk-KEQMXZG3.js";import"./chunk-GOXB5OSV.js";import{a as L}from"./chunk-4BHWRWDA.js";import{a as W}from"./chunk-ZP7S6SWW.js";import{b as H,c as Y,d as z,g as J,j as Q,k as X,q as Z,r as ee,s as te,t as ne,v as ie,w as re}from"./chunk-EAGDHIOY.js";import{aa as k,ba as A,bb as O,cb as q,d as F,qb as K,ra as R,sa as I,sb as U,tb as G,ub as $,va as V,vb as j}from"./chunk-ZE63MCPL.js";import{Kb as n,Lb as i,Qb as N,Vb as u,Xb as S,db as a,eb as w,hc as o,ia as x,ic as C,jc as B,mc as m,nc as c,oc as p,qc as P,sc as D,ta as b,tc as E,ua as f,vc as v,xb as T,zb as M}from"./chunk-DRLFSV2D.js";import{a as _,f as de}from"./chunk-TMEVGU2Q.js";var s=de(se());var ue=h=>({itemsPerPage:4,currentPage:h});function me(h,g){if(h&1){let y=N();n(0,"tr")(1,"th",44),o(2),i(),n(3,"td"),o(4),i(),n(5,"td"),o(6),i(),n(7,"td"),o(8),i(),n(9,"td"),o(10),i(),n(11,"td")(12,"button",45),u("click",function(){let l=b(y).$implicit,t=S();return f(t.viewCountry(l))}),n(13,"i",46),o(14,"view"),i()(),n(15,"button",47),u("click",function(){let l=b(y).$implicit,t=S();return f(t.editCountry(l))}),n(16,"i",48),o(17,"edit"),i()(),n(18,"button",49),u("click",function(){let l=b(y).$implicit,t=S();return f(t.deleteCountry(l))}),n(19,"i",50),o(20,"delete"),i()()()()}if(h&2){let y=g.$implicit,e=g.index;a(2),C(e+1),a(2),C(y.name),a(2),C(y.address),a(2),C(y.email),a(2),C(y.mobileNumber)}}var Le=(()=>{let g=class g{constructor(e){this.apiService=e,this.conList=[],this.searchText="",this.p=1,this.isModalVisible=!1,this.isEditMode=!1,this.currentCountry={name:"",address:"",displayPicture:"",parentMobileNumber:"",dob:"",gender:"",subscriptionTypeFee:0,website:"",email:"",mobileNumber:"",tribe:"",relationship:"",religion:""},this.selectedLogoFile=null}refreshData(){this.apiService.get("Student/GetAll").subscribe({next:e=>{e.status==="success"?this.conList=e.data:s.default.fire({title:"Error",text:`${e.message}`,icon:"error",confirmButtonText:"Retry"})},error:e=>{s.default.fire({title:"Error",text:`${e.error.message}`,icon:"error",confirmButtonText:"Retry"})}})}ngOnInit(){this.refreshData()}onSubmit(){let e=new FormData;e.append("name",this.currentCountry.name),e.append("address",this.currentCountry.address),e.append("relationship",this.currentCountry.relationship),this.selectedLogoFile&&e.append("displayPicture",this.selectedLogoFile),e.append("email",this.currentCountry.email),e.append("parentRelationship",this.currentCountry.parentRelationship),e.append("gender",this.currentCountry.gender),e.append("dob",this.currentCountry.dob),e.append("mobileNumber",this.currentCountry.mobileNumber),e.append("tribe",this.currentCountry.tribe),e.append("religion",this.currentCountry.religion),e.append("parentMobileNumber",this.currentCountry.parentMobileNumber),console.log("Form submission successful",e),this.apiService.post("Student/Add",e).subscribe({next:l=>{console.log("Form submission successful",l),l.status==="success"?s.default.fire({title:"Success!",text:`${l.message}`,icon:"success",confirmButtonText:"OK"}).then(()=>{this.closeModal(),this.ngOnInit()}):s.default.fire({title:"Error",text:`${l.message}`,icon:"error",confirmButtonText:"Retry"})},error:l=>{s.default.fire({title:"Error",text:`${l.error.message}`,icon:"error",confirmButtonText:"Retry"})}})}saveCountry(){console.log("Save country:",this.currentCountry),this.isEditMode=!1,this.apiService.post("Student/Add",this.currentCountry).subscribe({next:e=>{console.log("School added successful",e),e.status==="success"?s.default.fire({title:"Success!",text:`${e.message}`,icon:"success",confirmButtonText:"OK"}).then(()=>{this.closeModal(),this.ngOnInit()}):s.default.fire({title:"Error",text:`${e.message}`,icon:"error",confirmButtonText:"Retry"})},error:e=>{s.default.fire({title:"Error",text:`${e.error.message}`,icon:"error",confirmButtonText:"Retry"})}})}updateCountry(){let e=new FormData;e.append("name",this.currentCountry.name),e.append("address",this.currentCountry.address),this.selectedLogoFile&&e.append("displayPicture",this.selectedLogoFile),e.append("email",this.currentCountry.email),e.append("relationship",this.currentCountry.relationship),e.append("gender",this.currentCountry.gender),e.append("dob",this.currentCountry.dob),e.append("mobileNumber",this.currentCountry.mobileNumber),e.append("parentMobileNumber",this.currentCountry.parentMobileNumber),e.append("tribe",this.currentCountry.tribe),e.append("religion",this.currentCountry.religion),console.log("Form submission successful",e),this.apiService.put(`Student/UpdateById/${this.currentCountry.id}`,e).subscribe({next:l=>{if(l.status==="success"){let t=this.conList.findIndex(d=>d.id===this.currentCountry._id);t!==-1&&(this.conList[t]=_({},this.currentCountry)),s.default.fire({title:"Updated!",text:`${l.message}`,icon:"success",confirmButtonText:"OK"}).then(()=>{this.closeModal(),this.ngOnInit()})}else s.default.fire({title:"Error",text:`${l.message}`,icon:"error",confirmButtonText:"Retry"})},error:l=>{s.default.fire({title:"Error",text:`${l.error.message||"An unexpected error occurred"}`,icon:"error",confirmButtonText:"Retry"})}})}viewCountry(e){let t=new Date(e.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"});s.default.fire({title:"Country Details",html:`<strong>Country:</strong> ${e.name}
      <br/>
             <strong>CreatedAt:</strong> ${t} `,icon:"info",confirmButtonText:"Close"})}openModal(){console.log("Opening modal"),this.isModalVisible=!0}editCountry(e){console.log("Edit country:",e),this.currentCountry=_({},e),this.isEditMode=!0,this.openModal()}deleteCountry(e){s.default.fire({title:"Are you sure?",text:`Do you want to delete ${e.name}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(l=>{l.isConfirmed?this.apiService.delete(`Student/DeleteById/${e.id}`).subscribe({next:()=>{this.conList=this.conList.filter(t=>t.id!==e.id),s.default.fire("Deleted!",`${e.name} has been deleted.`,"success"),this.ngOnInit()},error:t=>{s.default.fire({title:"Error",text:`${t.error.message}`,icon:"error",confirmButtonText:"Retry"})}}):l.dismiss===s.default.DismissReason.cancel&&s.default.fire("Cancelled",`${e.name} is safe.`,"error")})}onFileChange(e){this.selectedLogoFile=e.target.files[0]}closeModal(){this.isModalVisible=!1}};g.\u0275fac=function(l){return new(l||g)(w(W))},g.\u0275cmp=x({type:g,selectors:[["app-student"]],standalone:!0,features:[P],decls:104,vars:22,consts:[["xs","12"],[1,"mb-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn","btn-primary","ml-auto",3,"click"],["type","text","placeholder","Search student",1,"form-control","mb-3",3,"ngModelChange","ngModel"],["cTable","",1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[3,"pageChange"],["backdrop","static",3,"visibleChange","visible"],["cModalTitle",""],["cButtonClose","",3,"click"],[3,"ngSubmit"],[1,"container"],[1,"row"],[1,"form-group","col-md-12"],["for","countryName"],["type","text","id","countryName","placeholder","Student Name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","col-md-6"],["for","countryWebsite"],["type","text","placeholder","Phone Number","id","mobileNumber","name","mobileNumber","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","countryAddress"],["type","text","id","countryAddress","placeholder","Student Address","name","address","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","countryLogo"],["type","file","id","displayPicture","required","",1,"form-control",3,"change"],["for","countrySubscriptionType"],["id","gender","name","gender","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","Male"],["value","Female"],["type","text","placeholder","Parent Phone Number","id","mobileNumber","name","mobileNumber","required","",1,"form-control",3,"ngModelChange","ngModel"],["id","relationship","name","parentRelationship","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","Father"],["value","Mother"],["value","Uncle"],["value","Aunty"],["value","Siblings"],["for","dob"],["type","date","id","dob","name","dob","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","countryMobileNumber"],["type","text","placeholder","Tribe","id","countryMobileNumber","name","mobileNumber","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","countryPinKey"],["type","text","placeholder","Religion","id","countryPinKey","name","pinKey","required","",1,"form-control",3,"ngModelChange","ngModel"],["cButton","","color","secondary",3,"click"],["cButton","","color","primary",3,"click"],["scope","row"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"fa","fa-eyes"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"fa","fa-pencil"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-times"]],template:function(l,t){l&1&&(n(0,"c-row")(1,"c-col",0)(2,"c-card",1)(3,"c-card-header",2)(4,"strong"),o(5,"List Of Students"),i(),n(6,"button",3),u("click",function(){return t.openModal()}),o(7," Add "),i()(),n(8,"c-card-body")(9,"input",4),p("ngModelChange",function(r){return c(t.searchText,r)||(t.searchText=r),r}),i(),n(10,"table",5)(11,"thead")(12,"tr")(13,"th",6),o(14,"SN"),i(),n(15,"th",6),o(16,"Name"),i(),n(17,"th",6),o(18,"Address"),i(),n(19,"th",6),o(20,"Email"),i(),n(21,"th",6),o(22,"Phone Number"),i(),n(23,"th",6),o(24,"Actions"),i()()(),n(25,"tbody"),T(26,me,21,5,"tr",7),E(27,"search"),E(28,"paginate"),i()(),n(29,"pagination-controls",8),u("pageChange",function(r){return t.p=r}),i()()()()(),n(30,"c-modal",9),u("visibleChange",function(r){return t.isModalVisible=r}),n(31,"c-modal-header")(32,"h5",10),o(33),i(),n(34,"button",11),u("click",function(){return t.closeModal()}),i()(),n(35,"c-modal-body")(36,"form",12),u("ngSubmit",function(){return t.isEditMode?t.updateCountry():t.saveCountry()}),n(37,"div",13)(38,"form")(39,"div",14)(40,"div",15)(41,"label",16),o(42,"Student Name"),i(),n(43,"input",17),p("ngModelChange",function(r){return c(t.currentCountry.name,r)||(t.currentCountry.name=r),r}),i()()(),n(44,"div",14)(45,"div",18)(46,"label",19),o(47,"Phone Number"),i(),n(48,"input",20),p("ngModelChange",function(r){return c(t.currentCountry.mobileNumber,r)||(t.currentCountry.mobileNumber=r),r}),i()(),n(49,"div",18)(50,"label",21),o(51,"Student Address"),i(),n(52,"input",22),p("ngModelChange",function(r){return c(t.currentCountry.address,r)||(t.currentCountry.address=r),r}),i()()(),n(53,"div",14)(54,"div",18)(55,"label",23),o(56,"Profile Picture"),i(),n(57,"input",24),u("change",function(r){return t.onFileChange(r)}),i()(),n(58,"div",18)(59,"label",25),o(60,"Gender"),i(),n(61,"select",26),p("ngModelChange",function(r){return c(t.currentCountry.gender,r)||(t.currentCountry.gender=r),r}),n(62,"option",27),o(63,"Male"),i(),n(64,"option",28),o(65,"Female"),i()()()(),n(66,"div",14)(67,"div",15)(68,"label",19),o(69,"Parent Phone Number"),i(),n(70,"input",29),p("ngModelChange",function(r){return c(t.currentCountry.parentMobileNumber,r)||(t.currentCountry.parentMobileNumber=r),r}),i()()(),n(71,"div",14)(72,"div",18)(73,"label",25),o(74,"Parent Relationship"),i(),n(75,"select",30),p("ngModelChange",function(r){return c(t.currentCountry.relationship,r)||(t.currentCountry.relationship=r),r}),n(76,"option",31),o(77,"Father"),i(),n(78,"option",32),o(79,"Mother"),i(),n(80,"option",33),o(81,"Uncle"),i(),n(82,"option",34),o(83,"Aunty"),i(),n(84,"option",35),o(85,"Siblings"),i()()(),n(86,"div",18)(87,"label",36),o(88,"Date of Birth"),i(),n(89,"input",37),p("ngModelChange",function(r){return c(t.currentCountry.dob,r)||(t.currentCountry.dob=r),r}),i()()(),n(90,"div",14)(91,"div",18)(92,"label",38),o(93,"Tribe"),i(),n(94,"input",39),p("ngModelChange",function(r){return c(t.currentCountry.tribe,r)||(t.currentCountry.tribe=r),r}),i()(),n(95,"div",18)(96,"label",40),o(97,"Religion"),i(),n(98,"input",41),p("ngModelChange",function(r){return c(t.currentCountry.religion,r)||(t.currentCountry.religion=r),r}),i()()()()()()(),n(99,"c-modal-footer")(100,"button",42),u("click",function(){return t.closeModal()}),o(101,"Close"),i(),n(102,"button",43),u("click",function(){return t.isEditMode?t.updateCountry():t.onSubmit()}),o(103),i()()()),l&2&&(a(9),m("ngModel",t.searchText),a(17),M("ngForOf",v(28,17,v(27,14,t.conList,t.searchText),D(20,ue,t.p))),a(4),M("visible",t.isModalVisible),a(3),C(t.isEditMode?"Edit Student":"Add Student"),a(10),m("ngModel",t.currentCountry.name),a(5),m("ngModel",t.currentCountry.mobileNumber),a(4),m("ngModel",t.currentCountry.address),a(9),m("ngModel",t.currentCountry.gender),a(9),m("ngModel",t.currentCountry.parentMobileNumber),a(5),m("ngModel",t.currentCountry.relationship),a(14),m("ngModel",t.currentCountry.dob),a(5),m("ngModel",t.currentCountry.tribe),a(4),m("ngModel",t.currentCountry.religion),a(5),B(" ",t.isEditMode?"Update":"Save"," "))},dependencies:[q,O,R,V,I,re,X,ee,te,H,Z,Y,z,ne,ie,Q,J,k,F,ae,le,oe,L,j,G,$,K,U,A]});let h=g;return h})();export{Le as StudentComponent};
